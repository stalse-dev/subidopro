{% extends 'main.html' %}
{% block containerBodyMain %}
    <div class="flex flex-col text-white min-h-screen pt-20">
        <h1 class="text-3xl font-bold text-center mt-6">Lista clientes com retenção</h1>
        <div class="flex-grow flex items-center justify-center p-4">
            <div class="w-[100%] max-w-7xl bg-gray-800 p-6 rounded-lg shadow-lg">
                <div class="overflow-x-auto">
                    <table class="w-full text-sm text-left text-gray-400">
                        <thead class="text-xs uppercase bg-gray-700 text-gray-400">
                            <tr>
                                <th class="px-6 py-3">Aluno</th>
                                <th class="px-6 py-3">ID Cliente</th>
                                <th class="px-6 py-3">ID Contrato</th>
                                <th class="px-6 py-3">Valor Contrato</th>
                                <th class="px-6 py-3">Valor do envio</th>
                                <th class="px-6 py-3">Pontos Cliente</th>
                                <th class="px-6 py-3">Pontos Retenção</th>
                                <th class="px-6 py-3">Tipo Contrato</th>
                                <th class="px-6 py-3">Porcentagem</th>
                                <th class="px-6 py-3">Data Vencimento</th>
                                <th class="px-6 py-3">Total Envios</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for retencao in retencoes %}
                            <tr class="bg-gray-800 border-b border-gray-700 hover:bg-gray-700 cursor-pointer" 
                                onclick="#">
                                <td class="px-6 py-4">{{ retencao.aluno__apelido }}</td>
                                <td class="px-6 py-4">{{ retencao.id }}</td>
                                <td class="px-6 py-4">{{ retencao.contratos__id }}</td>
                                <td class="px-6 py-4">R$ {{ retencao.contratos__valor_contrato }}</td>
                                <td class="px-6 py-4">R$ {{ retencao.ultimo_envio }}</td>
                                <td class="px-6 py-4 text-green-400">{{ retencao.pontosCliente }} Pts</td>
                                <td class="px-6 py-4 text-green-400">{{ retencao.PontosRetencao }} Pts</td>
                                <td class="px-6 py-4">{{ retencao.contratos__tipo_contrato }}</td>
                                <td class="px-6 py-4">{{ retencao.contratos__porcentagem_contrato|default:"0" }}%</td>
                                <td class="px-6 py-4">{{ retencao.contratos__data_vencimento|default:"N/D" }}</td>
                                <td class="px-6 py-4">{{ retencao.total_envios }}</td>
                            </tr>
                            {% empty %}
                            <tr>
                                <p class="text-center">Nenhum clientes encontrado.</p>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
{% endblock %}